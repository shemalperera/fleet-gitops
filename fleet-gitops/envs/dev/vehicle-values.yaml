# Vehicle Service - Development Environment
serviceName: vehicle-service
namespace: fleet-dev
replicaCount: 1

image:
  repository: shemalperera/fleet-mgt-app-vehicle-service
  tag: "1.0"
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 7001       # service port inside cluster
  targetPort: 8080 # container port (ASP.NET listens here)

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

env:
  ASPNETCORE_ENVIRONMENT: Development
  ASPNETCORE_URLS: "http://+:8080"
  CORS_ORIGINS: "*"
  AUTH_DISABLED: "true"
  # App connects to Postgres service on standard 5432
  ConnectionStrings__DefaultConnection: "Host=postgres-vehicle;Port=5432;Database=vehicle_db;Username=postgres;Password=postgres"

database:
  enabled: true
  name: postgres-vehicle
  image: postgres:16
  # Make Postgres listen on 5432 inside the pod (same as docker container)
  port: 5432
  storage: 1Gi
  env:
    POSTGRES_USER: postgres
    POSTGRES_PASSWORD: postgres
    POSTGRES_DB: vehicle_db

healthCheck:
  enabled: true
  path: /health
  initialDelaySeconds: 30
  periodSeconds: 10

autoscaling:
  enabled: false

ingress:
  enabled: false